!function(e){e.module("az.leaflet",[])}(angular),function(){"use strict";function e(){var e={restrict:"E",scope:{center:"=",zoom:"=",options:"="},require:"^azLeaflet",link:function(e,t,n,a){function r(t){t&&t.lat&&t.lng&&a.getMap().then(function(n){n.setView(t,e.zoom,e.options)})}function o(t){t&&t>0&&a.getMap().then(function(n){n.setView(e.center,t,e.options)})}(null===e.options||void 0===e.options)&&(e.options={}),e.$watch("center",r),e.$watch("zoom",o)}};return e}angular.module("az.leaflet").directive("azLeafletCenter",e)}(),function(){"use strict";function e(){function e(e){function t(e,t,a,r){r.getMap().then(n.onMapReady)}var n=angular.extend({},{restrict:"E",require:"^azLeaflet",scope:!0,onMapReady:angular.noop},e);return n.link=t,angular.extend({},n,e)}return e}angular.module("az.leaflet").factory("AZLeafletComponentFactory",e)}(),function(){"use strict";function e(e,t){function n(){i=t.defer(),o.getMap=a,o.setMap=r}function a(){return i.promise}function r(t){i.resolve(t),e(function(){t.invalidateSize()},0)}var o=this,i=null;n()}e.$inject=["$timeout","$q"],angular.module("az.leaflet").controller("AZLeafletController",e)}(),function(){"use strict";function e(e,t){function n(t,n){var a,r;if(angular.isDefined(n))a=n;else if(1===Object.keys(t).length)for(r in t)t.hasOwnProperty(r)&&(a=r);else 0===Object.keys(t).length?a="main":e.error("[azavea-ng-leaflet] - You have more than 1 map on the DOM, you must provide the map ID to the LeafletData.getMap call");return a}function a(e,t){var a=n(e,t);e[a].resolvedDefer=!0}function r(e,a){var r,o=n(e,a);return angular.isDefined(e[o])&&e[o].resolvedDefer!==!0?r=e[o].defer:(r=t.defer(),e[o]={defer:r,resolvedDefer:!1}),r}function o(e,t){var a,o=n(e,t);return a=angular.isDefined(e[o])&&e[o].resolvedDefer!==!1?e[o].defer:r(e,t)}function i(e,t){var n=r(f,t);n.resolve(e),a(f,t)}function l(e){var t=o(f,e);return t.promise}function u(t){var a=n(f,t);e.info(f,a),delete f[a]}var f={},c={getMap:l,setMap:i,deleteMap:u};return c}e.$inject=["$log","$q"],angular.module("az.leaflet").service("AZLeafletData",e)}(),function(){"use strict";function e(){function e(){function e(){return angular.extend({},n)}var t={get:e};return t}var t=this,n={center:[0,0],zoom:1,crs:L.CRS.EPSG3857};t.setDefaults=function(e){angular.merge(n,e)},t.$get=e}angular.module("az.leaflet").provider("AZLeafletDefaults",e)}(),function(e){"use strict";function t(t,n,a,r){function o(t,o,i,l){function u(){n(function(){d.invalidateSize()})}function f(){d.remove(),r.deleteMap(i.id)}i.width&&o.css("width",i.width),i.height&&o.css("height",i.height);var c=a.get();t.options=t.options||{};var s=e.extend({},c,t.options),d=new L.map(o[0],s);l.setMap(d),r.setMap(d,i.id),t.$on("$destroy",f),t.$on("az.leaflet.invalidatesize",u)}var i={restrict:"E",scope:{options:"@"},transclude:!0,replace:!0,template:'<div class="azavea-ng-leaflet-map"><div ng-transclude></div></div>',controller:"AZLeafletController",bindToController:!0,link:o};return i}t.$inject=["$log","$timeout","AZLeafletDefaults","AZLeafletData"],e.module("az.leaflet").directive("azLeaflet",t)}(angular);